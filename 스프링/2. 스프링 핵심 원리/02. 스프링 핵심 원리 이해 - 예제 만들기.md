# ğŸŒ± ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ ì´í•´ - ì˜ˆì œ ë§Œë“¤ê¸°

## í”„ë¡œì íŠ¸ ìƒì„±

### í”„ë¡œì íŠ¸ ì„ íƒ

- Project: Gradle Project
- Spring Boot: 2.3.x
- Language: Java
- Packaging: Jar
- Java: 11

### Project Metadata

- groupId: hello
- artifactId: core (í”„ë¡œì íŠ¸ ë¹Œë“œëª…)
- dependencies: ì„ íƒ ì•ˆ í•¨

### Garadle ì „ì²´ ì„¤ì •

`build.gradle`

```java
plugins {
      id 'org.springframework.boot' version '2.3.3.RELEASE'
      id 'io.spring.dependency-management' version '1.0.9.RELEASE'
      id 'java'
}
group = 'hello'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '11'
repositories {
      mavenCentral()
}
dependencies {
      implementation 'org.springframework.boot:spring-boot-starter'
      testImplementation('org.springframework.boot:spring-boot-starter-test') {
          exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'
      }
}
test {
      useJUnitPlatform()
}
```

### Gradle ëŒ€ì‹  IntelliJë¡œ Java ì§ì ‘ ì‹¤í–‰

ìµœê·¼ IntelliJ ë²„ì „ì€ Gradleì„ í†µí•´ì„œ ì‹¤í–‰ í•˜ëŠ” ê²ƒì´ ê¸°ë³¸ ì„¤ì •ì´ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì‹¤í–‰ì†ë„ê°€ ëŠë¦¬ë‹¤.  
ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•˜ë©´ ìë°”ë¡œ ë°”ë¡œ ì‹¤í–‰í•´ì„œ ì‹¤í–‰ì†ë„ê°€ ë” ë¹ ë¥´ë‹¤.

- Preferences â†’ Build, Execution, Deployment â†’ Build Tools â†’ Gradle
    - Build and run using: Gradle â†’ IntelliJ IDEA
    - Run tests using: Gradle â†’ IntelliJ IDEA

&nbsp;

## ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ê³¼ ì„¤ê³„

### íšŒì›

- íšŒì›ì„ ê°€ì…í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- íšŒì›ì€ ì¼ë°˜ê³¼ VIP ë‘ ê°€ì§€ ë“±ê¸‰ì´ ìˆë‹¤.
- íšŒì› ë°ì´í„°ëŠ” ìì²´ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ ìˆë‹¤. (ë¯¸í™•ì •)

### ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±…

- íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
- íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.
- í• ì¸ ì •ì±…ì€ ëª¨ë“  VIPëŠ” 1000ì›ì„ í• ì¸í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš©í•´ë‹¬ë¼. (ë‚˜ì¤‘ì— ë³€ê²½ ë  ìˆ˜ ìˆë‹¤.)
- í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. íšŒì‚¬ì˜ ê¸°ë³¸ í• ì¸ ì •ì±…ì„ ì•„ì§ ì •í•˜ì§€ ëª»í–ˆê³ , ì˜¤í”ˆ ì§ì „ê¹Œì§€ ê³ ë¯¼ì„ ë¯¸ë£¨ê³  ì‹¶ë‹¤. ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤. (ë¯¸í™•ì •)

ìš”êµ¬ì‚¬í•­ì„ ë³´ë©´ íšŒì› ë°ì´í„°, í• ì¸ ì •ì±… ê°™ì€ ë¶€ë¶„ì€ ì§€ê¸ˆ ê²°ì •í•˜ê¸° ì–´ë ¤ìš´ ë¶€ë¶„ì´ë‹¤. ê·¸ë ‡ë‹¤ê³  ì´ëŸ° ì •ì±…ì´
ê²°ì •ë  ë•Œ ê¹Œì§€ ê°œë°œì„ ë¬´ê¸°í•œ ê¸°ë‹¤ë¦´ ìˆ˜ë„ ì—†ë‹¤.

**í•˜ì§€ë§Œ ê°ì²´ ì§€í–¥ ì„¤ê³„ ë°©ë²•ìœ¼ë¡œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê³  êµ¬í˜„ì²´ë¥¼ ì–¸ì œë“ ì§€ ê°ˆì•„ë¼ìš¸ ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•˜ë©´ ëœë‹¤!**

&nbsp;

## íšŒì› ë„ë©”ì¸ ì„¤ê³„

### íšŒì› ë„ë©”ì¸ ìš”êµ¬ì‚¬í•­

- íšŒì›ì„ ê°€ì…í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- íšŒì›ì€ ì¼ë°˜ê³¼ VIP ë‘ ê°€ì§€ ë“±ê¸‰ì´ ìˆë‹¤.
- íšŒì› ë°ì´í„°ëŠ” ìì²´ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ ìˆë‹¤. (ë¯¸í™•ì •)

### íšŒì› ë„ë©”ì¸ í˜‘ë ¥ ê´€ê³„

<img width="835" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-02-22 á„‹á…©á„’á…® 9 27 40" src="https://user-images.githubusercontent.com/45806836/108708434-cc497180-7554-11eb-8758-cfa45dd634be.png">

íšŒì› DBë¥¼ ìì²´ êµ¬ì¶•í•  ìˆ˜ë„ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ë„ ìˆìœ¼ë‹ˆ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì„ ë”°ë¡œ ë§Œë“ ë‹¤.  
íšŒì› ì €ì¥ì†Œ ì¸í„°í˜ì´ìŠ¤(ì—­í• )ë¥¼ ë‘ê³ , êµ¬í˜„ì€ ë©”ëª¨ë¦¬, DB, ì™¸ë¶€ ì €ì¥ì†Œë¡œ ë¶„ë¦¬í•œë‹¤.

### íšŒì› í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨


<img width="834" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-02-22 á„‹á…©á„’á…® 9 27 55" src="https://user-images.githubusercontent.com/45806836/108708472-d53a4300-7554-11eb-9c38-136b64847456.png">

íšŒì› ì„œë¹„ìŠ¤ ì—­í• ì¸ MemberServiceëŠ” Interfaceë¡œ ë§Œë“¤ê³ , êµ¬í˜„ì²´ì¸ Implë¥¼ ë”°ë¡œ ë‘”ë‹¤.  
íšŒì› ì €ì¥ì†Œ ì—­í• ì¸ MemberRepositoryëŠ” Interfaceë¡œ ë§Œë“¤ê³ , êµ¬í˜„ì²´ì¸ Memoryì™€ Dbë¥¼ ë”°ë¡œ ë‘”ë‹¤.

### íšŒì› ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨


<img width="835" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-02-22 á„‹á…©á„’á…® 9 28 10" src="https://user-images.githubusercontent.com/45806836/108708499-df5c4180-7554-11eb-9700-af64fdfabe35.png">

ì‹¤ì œ ì„œë²„ì— ì˜¬ë¼ì™”ì„ ë•Œ ì¸ìŠ¤í„´ìŠ¤ ê°„ì˜ ì°¸ì¡° ê´€ê³„.  
í´ë¼ì´ì–¸íŠ¸ê°€ ì‹¤ì œë¡œ ì°¸ì¡°í•˜ëŠ” ì£¼ì†Œ ê°’ì€ MemberServiceImple, â†’ MemoryMemberRepositoryë‹¤.

&nbsp;

## íšŒì› ë„ë©”ì¸ ê°œë°œ

### íšŒì› ì—”í‹°í‹°

**íšŒì› ë“±ê¸‰**

```java
public enum Grade {
    BASIC,
    VIP
}
```

íšŒì›ì€ ì¼ë°˜ê³¼ VIP ë‘ ê°€ì§€ ë“±ê¸‰ì´ ìˆë‹¤.

**íšŒì› ì—”í‹°í‹°**

```java
public class Member {

    private Long id;
    private String name;
    private Grade grade;

    public Member(Long id, String name, Grade grade) {
        this.id = id;
        this.name = name;
        this.grade = grade;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Grade getGrade() {
        return grade;
    }

    public void setGrade(Grade grade) {
        this.grade = grade;
    }
}
```

`cmd` + `n` ìœ¼ë¡œ ìƒì„±ì ë° getter, setter ìƒì„±

### íšŒì› ì €ì¥ì†Œ

**íšŒì› ì €ì¥ì†Œ ì¸í„°í˜ì´ìŠ¤**

```java
public interface MemberRepository {

    void save(Member member);

    Member findById(Long memberId);
}
```

**ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ êµ¬í˜„ì²´**

```java
public class MemoryMemberRepository implements MemberRepository {

    private static Map<Long, Member> store = new HashMap<>();
    @Override

    public void save(Member member) {
        store.put(member.getId(), member);
    }

    @Override
    public Member findById(Long memberId) {
        return store.get(memberId);
    }
}
```

ë°ì´í„°ë² ì´ìŠ¤ê°€ ì•„ì§ í™•ì •ì´ ì•ˆë˜ì—ˆì§€ë§Œ, ê°œë°œì€ ì§„í–‰í•´ì•¼ í•˜ë‹ˆ ê°€ì¥ ë‹¨ìˆœí•œ ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œë¥¼ êµ¬í˜„í•œë‹¤.  
ë©”ëª¨ë¦¬ ì €ì¥ì†Œ êµ¬í˜„ì²´ëŠ” í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

> ì°¸ê³ : `HashMap`ì€ ë™ì‹œì„± ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë‹ˆ, `ConcurrentHashMap`ì„ ì‚¬ìš©í•œë‹¤.

### íšŒì› ì„œë¹„ìŠ¤

**íšŒì› ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤**

```java
public interface MemberService {

    void join(Member member);

    Member findMember(Long memberId);
}
```

ì´ìƒì ìœ¼ë¡œëŠ” ëª¨ë“  ì„¤ê³„ì— ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¶€ì—¬í•˜ë©´ ì¢‹ìœ¼ë‚˜, ì¸í„°í˜ì´ìŠ¤ë¥¼ ë„ì…í•˜ë©´ ì¶”ìƒí™”ë¼ëŠ” ë¹„ìš©ì´ ë°œìƒí•œë‹¤.  
ë”°ë¼ì„œ ê¸°ëŠ¥ì„ í™•ì¥í•  ê°€ëŠ¥ì„±ì´ ì—†ë‹¤ë©´, êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê³ , í–¥í›„ í•„ìš”ì‹œ ë¦¬íŒ©í„°ë§ í•˜ì—¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë„ì…í•˜ëŠ” ê²ƒë„ ë°©ë²•ì´ë‹¤. ì—¬ê¸°ì„œëŠ” ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬í•˜ëŠ” ê²ƒì— ì´ˆì ì„ ë§ì¶”ì–´ MemberServiceë„ ì—­í• (Interface)ê³¼ êµ¬í˜„(Impl)ë¡œ ë¶„ë¦¬í–ˆë‹¤.

**íšŒì› ì„œë¹„ìŠ¤ êµ¬í˜„ì²´**

```java
public class MemberServiceImpl implements MemberService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

êµ¬í˜„ì²´ê°€ í•˜ë‚˜ë¿ì¼ ë•ŒëŠ” ê´€ë¡€ìƒ XXImplì´ë¼ê³  ëª…ëª…í•œë‹¤.  
ì•ì„œ ë§Œë“  íšŒì› ì €ì¥ì†Œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„ ì–¸í•˜ê³  êµ¬í˜„ì²´(`MemoryMemberRepository`)ë¥¼ ì„ íƒí•´ ë„£ëŠ”ë‹¤.  
ë‹¤í˜•ì„±ì— ì˜í•´ `save` í˜¸ì¶œì‹œ `MemberRepository`ê°€ ì•„ë‹Œ `MemoryMemberRepository`ì˜ `save`ê°€ ì‹¤í–‰.

&nbsp;

## íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸

### íšŒì› ë„ë©”ì¸ - main

```java
public class MemberApp {
      public static void main(String[] args) {
          MemberService memberService = new MemberServiceImpl();
          Member member = new Member(1L, "memberA", Grade.VIP);
          memberService.join(member);

          Member findMember = memberService.findMember(1L);
          System.out.println("new member = " + member.getName());
          System.out.println("find Member = " + findMember.getName());
} }
```

ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ìœ¼ë¡œ ì´ë ‡ê²Œ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ë°©ë²•ì´ ì•„ë‹ˆë‹¤. JUnit í…ŒìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì.

ì°¸ê³ ) `soutv`: ì•ì„œ ì‚¬ìš©í•œ ë³€ìˆ˜ë¥¼ `System.out.println`ìœ¼ë¡œ ì°ì–´ì¤Œ.

### íšŒì› ë„ë©”ì¸ - íšŒì› ê°€ì… í…ŒìŠ¤íŠ¸

```java
class MemberServiceTest {

    MemberService memberService = new MemberServiceImpl();

    @Test
    void join() {
        // given
        Member member = new Member(1L, "jeongwon", Grade.VIP);

        // when
        memberService.join(member);
        Member foundMember = memberService.findMember(1L);

        // then
        assertThat(member).isEqualTo(foundMember);
    }
}
```

### íšŒì› ë„ë©”ì¸ ì„¤ê³„ì˜ ë¬¸ì œì 

```java
public class MemberServiceImpl implements MemberService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();
		...
}
```

`MemberServiceImpl`ì´ `MemberRepository`ì™€ `MemoryMemberRepository`ë¥¼ ëª¨ë‘ ì˜ì¡´í•œë‹¤.  
ì¦‰, ì˜ì¡´ê´€ê³„ê°€ ì¸í„°í˜ì´ìŠ¤(ì¶”ìƒí™”) ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬í˜„(êµ¬ì²´í™”)ê¹Œì§€ ëª¨ë‘ ì˜ì¡´í•˜ëŠ” ë¬¸ì œì ì´ ìˆë‹¤.  
*â†’ ë³€ê²½ì´ ìˆì„ ë•Œ ë¬¸ì œê°€ ë˜ë©°, DIPë¥¼ ìœ„ë°˜í•œë‹¤.*

## ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì„¤ê³„

**ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±…**

- íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
- íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.
- í• ì¸ ì •ì±…ì€ ëª¨ë“  VIPëŠ” 1000ì›ì„ í• ì¸í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš©í•´ë‹¬ë¼. (ë‚˜ì¤‘ì— ë³€ê²½ ë  ìˆ˜ ìˆ
ë‹¤.)
- í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. íšŒì‚¬ì˜ ê¸°ë³¸ í• ì¸ ì •ì±…ì„ ì•„ì§ ì •í•˜ì§€ ëª»í–ˆê³ , ì˜¤í”ˆ ì§ì „ê¹Œì§€ ê³ ë¯¼ì„
ë¯¸ë£¨ê³  ì‹¶ë‹¤. ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤. (ë¯¸í™•ì •)

### ì£¼ë¬¸ ë„ë©”ì¸ í˜‘ë ¥, ì—­í• , ì±…ì„


<img width="836" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-02-22 á„‹á…©á„’á…® 10 31 42" src="https://user-images.githubusercontent.com/45806836/108715107-bf7d4b80-755d-11eb-8247-f145ae5ceba8.png">

1. **ì£¼ë¬¸ ìƒì„±**: í´ë¼ì´ì–¸íŠ¸ëŠ” (ì£¼ë¬¸ì— í•„ìš”í•œ ë°ì´í„°ë“¤ì„ ê°€ì§€ê³ ) ì£¼ë¬¸ ì„œë¹„ìŠ¤ì— ì£¼ë¬¸ ìƒì„±ì„ ìš”ì²­í•œë‹¤.
2. **íšŒì› ì¡°íšŒ:** í• ì¸ì„ ìœ„í•´ì„œëŠ” íšŒì› ë“±ê¸‰ì´ í•„ìš”í•˜ë‹¤. â†’ ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ì €ì¥ì†Œì—ì„œ íšŒì›ì„ ì¡°íšŒí•œë‹¤.
3. **í• ì¸ ì ìš©:** ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ë“±ê¸‰ì— ë”°ë¥¸ í• ì¸ ì—¬ë¶€ë¥¼ í• ì¸ ì •ì±…ì— ìœ„ì„í•œë‹¤.
4. **ì£¼ë¬¸ ê²°ê³¼ ë°˜í™˜:** ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” í• ì¸ ê²°ê³¼ë¥¼ í¬í•¨í•œ ì£¼ë¬¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤. (ì‹¤ì œ DBì— ì €ì¥í•˜ëŠ” ê³¼ì •ì€ ìƒëµ)

### ì£¼ë¬¸ ë„ë©”ì¸ ì „ì²´


<img width="834" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-02-22 á„‹á…©á„’á…® 10 58 43" src="https://user-images.githubusercontent.com/45806836/108718189-8646da80-7561-11eb-9b81-ca10018b6929.png">

***ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬ â†’*** ììœ ë¡­ê²Œ êµ¬í˜„ ê°ì²´ë¥¼ ì¡°ë¦½í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„í–ˆë‹¤.  
â‡’ íšŒì› ì €ì¥ì†Œë¿ ì•„ë‹ˆë¼, í• ì¸ ì •ì±…ë„ ìœ ì—°í•˜ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

### ì£¼ë¬¸ ë„ë©”ì¸ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨


<img width="835" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-02-22 á„‹á…©á„’á…® 11 12 21" src="https://user-images.githubusercontent.com/45806836/108719856-6d3f2900-7563-11eb-9dbf-5101ce449afd.png">

### ì£¼ë¬¸ ë„ë©”ì¸ ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨


<img width="837" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-02-22 á„‹á…©á„’á…® 11 14 36" src="https://user-images.githubusercontent.com/45806836/108720100-be4f1d00-7563-11eb-8667-9f4bf6691990.png">

íšŒì›ì„ ë©”ëª¨ë¦¬ì—ì„œ ì¡°íšŒí•˜ê³ , ì •ì•¡ í• ì¸ ì •ì±…(ê³ ì • ê¸ˆì•¡)ì„ ì§€ì›í•´ë„ ì£¼ë¬¸ ì„œë¹„ìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. ì—­í• ë“¤ì˜ í˜‘ë ¥ ê´€ê³„ë¥¼ ê·¸ëŒ€ë¡œ ì¬ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.


<img width="836" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-02-22 á„‹á…©á„’á…® 11 15 21" src="https://user-images.githubusercontent.com/45806836/108720183-d9219180-7563-11eb-8be2-1a92a0763921.png">


íšŒì›ì„ ë©”ëª¨ë¦¬ê°€ ì•„ë‹Œ ì‹¤ì œ DBì—ì„œ ì¡°íšŒí•˜ê³ , ì •ë¥  í• ì¸ ì •ì±…(ì£¼ë¬¸ ê¸ˆì•¡ì— ë”°ë¼ % í• ì¸)ì„ ì§€ì›í•´ë„ ì£¼ë¬¸
ì„œë¹„ìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.  
í˜‘ë ¥ ê´€ê³„ë¥¼ ê·¸ëŒ€ë¡œ ì¬ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.

â†’ `MemoryRepository`ë‚˜ `DiscountPolicy`ì˜ êµ¬í˜„ì²´ ë³€ê²½ì— ë”°ë¥¸ `MemberService` ë³€ê²½ì´ ì—†ë‹¤.

## ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ê°œë°œ

### í• ì¸ ì •ì±… ì¸í„°í˜ì´ìŠ¤

```java
public interface DiscountPolicy {
      /**
* @return í• ì¸ ëŒ€ìƒ ê¸ˆì•¡
*/
      int discount(Member member, int price);
}
```

### ì •ì•¡ í• ì¸ ì •ì±… êµ¬í˜„ì²´

```java
public class FixDiscountPolicy implements DiscountPolicy {
		private int discountFixAmount = 1000; //1000ì› í• ì¸
		    @Override
		    public int discount(Member member, int price) {
		        if (member.getGrade() == Grade.VIP) {
		            return discountFixAmount;
		        } else {
		            return 0;
				}
		}
}
```

VIPë©´ 1000ì› í• ì¸, ì•„ë‹ˆë©´ í• ì¸ ì—†ìŒ

### ì£¼ë¬¸ ì—”í‹°í‹°

```java
public class Order {

    private Long memberId;
    private String itemName;
    private int itemPrice;
    private int discountPrice;

    public Order(Long memberId, String itemName, int itemPrice, int discountPrice) {
        this.memberId = memberId;
        this.itemName = itemName;
        this.itemPrice = itemPrice;
        this.discountPrice = discountPrice;
    }

    public int calculatePrice() {
        return itemPrice - discountPrice;
    }

    public Long getMemberId() {
        return memberId;
    }

    public void setMemberId(Long memberId) {
        this.memberId = memberId;
    }

    public String getItemName() {
        return itemName;
    }

    public void setItemName(String itemName) {
        this.itemName = itemName;
    }

    public int getItemPrice() {
        return itemPrice;
    }

    public void setItemPrice(int itemPrice) {
        this.itemPrice = itemPrice;
    }

    public int getDiscountPrice() {
        return discountPrice;
    }

    public void setDiscountPrice(int discountPrice) {
        this.discountPrice = discountPrice;
    }

    @Override
    public String toString() {
        return "Order{" +
                "memberId=" + memberId +
                ", itemName='" + itemName + '\'' +
                ", itemPrice=" + itemPrice +
                ", discountPrice=" + discountPrice +
                '}';
    }
}
```

### ì£¼ë¬¸ ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤

```java
public interface OrderService {

    Order createOrder(Long memberId, String itemName, int itemPrice);

}
```

### ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´

```java
public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);

        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

ì£¼ë¬¸ ìƒì„± ìš”ì²­ì´ ì˜¤ë©´, íšŒì› ì •ë³´ë¥¼ ì¡°íšŒí•˜ê³ , í• ì¸ ì •ì±…ì„ ì ìš©í•œ ë‹¤ìŒ ì£¼ë¬¸ ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.  
ë©”ëª¨ë¦¬ íšŒì› ë¦¬í¬ì§€í† ë¦¬ì™€, ê³ ì • ê¸ˆì•¡ í• ì¸ ì •ì±…ì„ êµ¬í˜„ì²´ë¡œ ìƒì„±í•œë‹¤.

`OrderService`ëŠ” í• ì¸ì— ëŒ€í•´ ëª°ë¼ë„ ëœë‹¤. `DiscountPolicy`ë¡œ ìœ„ì„. â†’ ì„¤ê³„ê°€ ì˜ ëœ ê²ƒ.

## ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸

### ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±… ì‹¤í–‰ - main

```java
public class OrderApp {

    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImpl();
        OrderService orderService = new OrderServiceImpl();

        Member member = new Member(1L, "jeongwon", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(member.getId(), "SpringBook", 10000);
        System.out.println("order = " + order);
        System.out.println("order.calculatePrice() = " + order.calculatePrice());

    }
}
```

ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ìœ¼ë¡œ ì´ë ‡ê²Œ í…ŒìŠ¤íŠ¸ í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ë°©ë²•ì´ ì•„ë‹ˆë‹¤. JUnit í…ŒìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì.

### ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±… í…ŒìŠ¤íŠ¸

```java
class OrderServiceTest {

    MemberService memberService = new MemberServiceImpl();
    OrderService orderService = new OrderServiceImpl();

    @Test
    void createOrder() {
        Long memberId = 1L;
        Member member = new Member(memberId, "jeongwon", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "Spring", 9000);
        Assertions.assertThat(order.getMemberId()).isEqualTo(memberId);
        Assertions.assertThat(order.getDiscountPrice()).isEqualTo(1000);
    }
}
```

ë‹¨ìœ„ í…ŒìŠ¤íŠ¸(ìŠ¤í”„ë§ ë° ì»¨í…Œì´ë„ˆì˜ ë„ì›€ ì—†ì´ ìˆœìˆ˜í•˜ê²Œ ìë°” ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸)ê°€ ì¤‘ìš”í•˜ë‹¤!
